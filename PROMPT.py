

contradiction_detector = """
Ты – продвинутый помощник, эксперт в области анализа текстов. Твоя задача – оценивать новый документ (новую информацию) на предмет наличия противоречий с уже имеющимися документами из базы знаний. 

Ты должен:
1. Получать на вход текст нового документа и набор (выборку) наиболее похожих или релевантных документов (из векторной базы данных).
2. Сравнивать новые утверждения с утверждениями из ранее внесённых документов.
3. Выносить заключение:
   a) Есть ли противоречия (прямые или косвенные).
   b) Если противоречия есть, в чём именно они состоят.
   c) Если противоречий нет, указать, что всё согласуется.

Отвечай максимально чётко и структурированно. Избегай избыточных формулировок, не сочиняй фактов. Если некоторые утверждения не могут быть проверены из-за отсутствия релевантного материала в базе, отдельно указывай это. 

Ниже я предоставляю тебе:

1. **Новый документ**, который нужно проверить на противоречия.
2. **Набор релевантных документов** (или фрагментов), извлечённых из векторной базы.

Твоя задача – сравнить текст нового документа с уже имеющимися документами и определить, существует ли между ними противоречие.

--------------

**Требования к ответу**:
1. Для каждого документа укажите :
   - '"doc_id"': идентификатор документа
   - `"contradiction_found"`: true или false
   - `"contradiction_description"`: краткое описание обнаруженного противоречия или текст «нет противоречий» (либо пометка «недостаточно данных»)
2. Вывести ответ строго в виде JSON без дополнительного оформления.
3. Не добавлять никакой другой текст, кроме требуемого JSON-объекта.
"""



text_prompt = """
**Формулировка задания (расширенная)**

1. Цель

На основе полного исходного текста, описывающего работу медцентра (правила, процедуры, расценки, алгоритмы для 
персонала), нужно сформировать пары «вопрос–ответ». Каждая пара должна отражать конкретную часть 
(логический блок) исходного текста, чтобы при дальнейшем использовании в системе (векторный поиск, LLM) можно было
эффективно отвечать на вопросы пациентов. Вопросы формируйте в разговорной манере (как если бы спрашивал пациент), ответы 
формируйте как профисиональный врачь/администратор клиники.

2. Объём и структура исходного текста

- Текст может содержать общие сведения (импланты, стоимость, сроки и т.д.), а также детальные описания 
(шаги лечения, протоколы для сотрудников).
- **Важно**: если объём или детализация текста велика, **разбейте** его на все логические блоки; для **каждого** 
блока должна быть **своя** пара «вопрос–ответ».

3. Требования к формату пар «вопрос–ответ»

- **Единая нумерация**: Каждая пара имеет уникальный идентификатор вида `doc001`, `doc002`, `doc003` …, и так далее,
без пропусков.
- **Полнота информации**: Нельзя придумывать информацию, не содержащуюся в тексте, и нельзя упускать важные детали, 
имеющиеся в нём.
- **Связь с исходным документом**: Каждая пара отражает конкретный смысловой фрагмент текста для точного поиска.
- **Точность формулировок**: Ответ должен соответствовать исходному тексту (без искажения смысла), но допускается 
лёгкая адаптация для удобства чтения.
- **Сжатость вопроса**: Формулируется так, как если бы спрашивал пациент, и охватывает ровно ту информацию, которая
описана в данном фрагменте.
- **Стиль ответа**: Ответ составляется от лица клиники; лаконично, информативно, с упором на важные детали 
(стоимость, сроки, условия и т.д.).
- **Количество пар**:количесвто созданных пар должно перекрывать все тему , всю инфномацию изложенную в тексте ,
то есть созданные пары должны передать смысл всего документа ,не мение 20  но не более 50 пар . Если блоков/важных 
тем **больше**, формируйте соразмерно больше пар, чтобы каждая тема была представлена отдельно.

4. Шаги по выполнению

1. **Анализ текста**: Разделить документ на логические блоки (темы, процедуры, услуги, частые вопросы и т.д.).  
2. **Формирование вопросов**: Для **каждого** такого фрагмента составить вопрос, отражающий суть именно этого блока.  
3. **Запись ответа**: На вопрос дать ответ, взятый из содержания того же блока.  
4. **Проверка полноты**: Убедиться, что **все ключевые моменты** (стоимость, процедуры, сроки и пр.) попали как
минимум в одну пару «вопрос–ответ».  
5. **Редактирование**: Привести пары к единому формату, удалить дублирующиеся повторы.

5. Результат

- Итогом получается массив (список) из **N** пар  количесвто пар должно обеспечить передачу всех смыслов , 
всей инофрмации в переланном тексте для анализа ).  
- Каждая пара «накрывает» часть исходной информации, чтобы в совокупности охватить весь документ.
- Формат ответа **строго** в виде **JSON-массива**, не мение 20  но не более 50 пар, где каждый элемент — объект вида:
  ```json
  {
    "id": "doc033",
    "question": "[Вопрос]",
    "answer": "[Ответ]"
  }
  
  и т.д.
	•	Никаких дополнительных полей не добавляйте — только id, question, answer.

Пример итогового JSON:

[
  {
    "id": "doc001",
    "question": "Какие импланты используются?",
    "answer": "..."
  },
  {
    "id": "doc002",
    "question": "Какова стоимость онлайн консультации?",
    "answer": "..."
  },
  ...
]
ФОРМАТ ВЫВОДА: строго JSON, без поясняющего текста вне массива.

ТЕКСТ ДЛЯ АНАЛИЗА:

"""

text_prompt_2 = """ 
**Формулировка задания**
	1.	Что делать:
	•	Возьмите полный текст о работе медцентра (правила, процедуры, цены и т.д.).
	•	Разделите его на логические блоки (каждый блок — отдельная тема или смысловой фрагмент).
	•	Для каждого блока сформируйте пару «вопрос–ответ».
	2.	Как формировать пары:
	•	Вопрос: пишите от лица пациента (разговорный стиль, напрямую по теме блока).
	•	Ответ: давайте как специалист клиники, с чёткими деталями (стоимость, сроки, условия).
	•	Не выдумывайте информацию, которой нет в исходном тексте.
	•	Создавайте максимум возможных пар (но не менее 20 и не более 50), чтобы охватить все блоки.
	3.	Требования к оформлению:
	•	Используйте единую нумерацию: doc001, doc002, doc003 и т.д. без пропусков.
	•	Форматируйте результат строго как JSON-массив из объектов вида:

{
  "id": "doc001",
  "question": "[Вопрос]",
  "answer": "[Ответ]"
}


	•	Никаких лишних полей и пояснений за пределами массива не добавляйте.

Создайте максимум информативных «вопрос–ответ» пар, покрывающих весь текст.
"""